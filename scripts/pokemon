#!/bin/bash
renice -n 0 -p $$ > /dev/null
########################################################################
############ DO NOT TOUCH ##############################################
############ bitrate modified ##########################################
########################################################################
bitrate_35=(40f6c063 c0f21623)
bitrate_40=(45f6023 c0f26223)
bitrate_45=(4af24053 c0f2ae23)
bitrate_50=(4ff2803 c0f2fa23)
bitrate_55=(43f6c033 c0f24733)
bitrate_60=(48f2073 c0f29333)
bitrate_65=(4df24023 c0f2df33)
bitrate_70=(41f68053 c0f22c43)
bitrate_75=(46f6c03 c0f27843)
bitrate_80=(4bf2043 c0f2c443)
bitrate_85=(4ff64073 c0f21053)
bitrate_90=(44f68023 c0f25d53)
bitrate_95=(49f2c053 c0f2a953)
bitrate_100=(4ef2013 c0f2f553)
bitrate_110=(47f28073 c0f28e63)
bitrate_120=(40f6063 c0f22773)
bitrate_130=(4af28043 c0f2bf73)
bitrate_140=(43f6033 c0f6583)
bitrate_150=(4df28013 c0f6f03)
bitrate_160=(46f603 c0f68913)
bitrate_170=(4ff68063 c0f62123)
bitrate_180=(49f2053 c0f6ba23)
bitrate_190=(42f68033 c0f65333)
bitrate_200=(4cf2023 c0f6eb33)
bitrate_210=(45f6803 c0f68443)
bitrate_220=(4ef6073 c0f61c53)
bitrate_230=(48f28053 c0f6b553)
bitrate_240=(41f6043 c0f64e63)
bitrate_250=(4bf28023 c0f6e663)
bitrate_260=(44f6013 c0f67f73)
bitrate_270=(4df68073 c1f2173)
bitrate_280=(47f2063 c1f2b03)
bitrate_290=(40f68043 c1f24913)
bitrate_300=(4af2033 c1f2e113)
bitrate_310=(43f68013 c1f27a23)
bitrate_320=(4df203 c1f21233)
########################################################################
############ DO NOT TOUCH ##############################################
############ bitrate NX500 PRO #########################################
########################################################################
bitrate_nx500pro_35=(40f6c060 c0f21620)
bitrate_nx500pro_40=(45f6020 c0f26220)
bitrate_nx500pro_45=(4af24050 c0f2ae20)
bitrate_nx500pro_50=(4ff2800 c0f2fa20)
bitrate_nx500pro_55=(43f6c030 c0f24730)
bitrate_nx500pro_60=(48f2070 c0f29330)
bitrate_nx500pro_65=(4df24020 c0f2df30)
bitrate_nx500pro_70=(41f68050 c0f22c40)
bitrate_nx500pro_75=(46f6c00 c0f27840)
bitrate_nx500pro_80=(4bf2040 c0f2c440)
bitrate_nx500pro_85=(4ff64070 c0f21050)
bitrate_nx500pro_90=(44f68020 c0f25d50)
bitrate_nx500pro_95=(49f2c050 c0f2a950)
bitrate_nx500pro_100=(4ef2010 c0f2f550)
bitrate_nx500pro_110=(47f28070 c0f28e60)
bitrate_nx500pro_120=(40f6060 c0f22770)
bitrate_nx500pro_130=(4af28040 c0f2bf70)
bitrate_nx500pro_140=(43f6030 c0f6580)
bitrate_nx500pro_150=(4df28010 c0f6f00)
bitrate_nx500pro_160=(46f600 c0f68910)
bitrate_nx500pro_170=(4ff68060 c0f62120)
bitrate_nx500pro_180=(49f2050 c0f6ba20)
bitrate_nx500pro_190=(42f68030 c0f65330)
bitrate_nx500pro_200=(4cf2020 c0f6eb30)
bitrate_nx500pro_210=(45f6800 c0f68440)
bitrate_nx500pro_220=(4ef6070 c0f61c50)
bitrate_nx500pro_230=(48f28050 c0f6b550)
bitrate_nx500pro_240=(41f6040 c0f64e60)
bitrate_nx500pro_250=(4bf28020 c0f6e660)
bitrate_nx500pro_260=(44f6010 c0f67f70)
bitrate_nx500pro_270=(4df68070 c1f2170)
bitrate_nx500pro_280=(47f2060 c1f2b00)
bitrate_nx500pro_290=(40f68040 c1f24910)
bitrate_nx500pro_300=(4af2030 c1f2e110)
bitrate_nx500pro_310=(43f68010 c1f27a20)
bitrate_nx500pro_320=(4df200 c1f21230)
########################################################################
############ DO NOT TOUCH ##############################################
############ bitrate offset definitions ################################
############ see scripts/nx-bitrate-map.png to find out more ###########
########################################################################
nx1_pro1=(0xb40d19d8 0xb40d19dc)
nx1_pro2=(0xb40d1a20 0xb40d1a24)
nx1_hq1=(0xb40d1832 0xb40d183a)
nx1_hq2=(0xb40d192e 0xb40d1936)
nx1_hq3=(0xb40d1a30 0xb40d1a38)
#
nx500_pro1=(0xb4046a04 0xb4046a08)
nx500_pro2=(0xb40469fa 0xb40469fe)
nx500_pro3=(0xb4046a64 0xb4046a68)
nx500_hq1=(0xb4046962 0xb404696a)
nx500_hq2=(0xb40468f0 0xb40468f8)
nx500_hq3=(0xb4046a50 0xb4046a58)
nx500_hq4=(0xb4046920 0xb4046928)
nx500_hq5=(0xb4046998 0xb40469aa)
nx500_hq6=(0xb40469a0 0xb40469b2)


if [ $(/bin/grep ^NX500$ /etc/version.info) = "NX500" -a $(/bin/grep ^1.11$ /etc/version.info) = "1.11" ]; then
        if [ $1 = "pro1" -o $1 = "pro2" -o $1 = "pro3" ]; then
                br0=bitrate_nx500pro_$2[0]; br1=bitrate_nx500pro_$2[1]
        else
                br0=bitrate_$2[0]; br1=bitrate_$2[1]
        fi
        off0=nx500_$1[0]; off1=nx500_$1[1]
        if [[  ${!off0}>"" &&  ${!off1}>"" && ${!br0}>"" && ${!br1}>"" ]]; then
               /mnt/mmc/scripts/poker $(pgrep di-camera-app) ${!off0}:${!br0} ${!off1}:${!br1}
        fi
elif [ $(/bin/grep   ^NX1$   /etc/version.info) = "NX1" -a $(/bin/grep ^1.40$ /etc/version.info) = "1.40" ]; then
                br0=bitrate_$2[0]; br1=bitrate_$2[1]
                off0=nx1_$1[0]; off1=nx1_$1[1]
                if [[  ${!off0}>"" &&  ${!off1}>"" && ${!br0}>"" && ${!br1}>"" ]]; then
                        /mnt/mmc/scripts/poker $(pgrep di-camera-app) ${!off0}:${!br0} ${!off1}:${!br1}
                fi
fi

exit
